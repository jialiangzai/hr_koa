(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-6c312f8f"],{"0b62":function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"employees-container"},[a("div",{staticClass:"app-container"},[a("el-card",{attrs:{shadow:"always","body-style":{padding:"20px"}}},[a("div",{attrs:{slot:"header"},slot:"header"},[a("PageTool",{scopedSlots:e._u([{key:"left",fn:function(){return[a("span",[e._v("总记录数："+e._s(e.total)+"条")])]},proxy:!0},{key:"right",fn:function(){return[a("el-button",{attrs:{type:"warning",size:"small"},on:{click:function(t){return e.$router.push("/import")}}},[e._v(" 导入excel ")]),a("el-button",{attrs:{type:"danger",size:"small",loading:e.downloadLoading},on:{click:e.exportData}},[e._v(" 导出excel ")]),e.checkPermission("p-em-add")?a("el-button",{attrs:{type:"primary",size:"small"},on:{click:function(t){e.showDialog=!0}}},[e._v(" 新增员工 ")]):e._e()]},proxy:!0}])})],1),a("div",[a("el-table",{attrs:{border:"",data:e.list,"default-sort":{prop:"workNumber",order:"descending"}}},[a("el-table-column",{attrs:{label:"序号",type:"index"}}),a("el-table-column",{attrs:{label:"姓名",prop:"username"}}),a("el-table-column",{attrs:{label:"头像"},scopedSlots:e._u([{key:"default",fn:function(t){var r=t.row;return[a("img",{staticClass:"staff",attrs:{src:r.staffPhoto},on:{click:function(t){return e.qurCode(r.staffPhoto)}}})]}}])}),a("el-table-column",{attrs:{sortable:"",label:"工号",prop:"workNumber"}}),a("el-table-column",{attrs:{label:"聘用形式",prop:"formOfEmployment"},scopedSlots:e._u([{key:"default",fn:function(t){var r=t.row;return[a("p",[e._v(e._s(e.formatForm(r.formOfEmployment)))])]}}])}),a("el-table-column",{attrs:{label:"部门",prop:"departmentName"}}),a("el-table-column",{attrs:{sortable:"",label:"入职时间",prop:"correctionTime"},scopedSlots:e._u([{key:"default",fn:function(t){var a=t.row;return[e._v(" "+e._s(e.formatDate(a.timeOfEntry))+" ")]}}])}),a("el-table-column",{attrs:{label:"账户状态",align:"center"}},[a("el-switch",{model:{value:e.qy,callback:function(t){e.qy=t},expression:"qy"}})],1),a("el-table-column",{attrs:{label:"操作",fixed:"right",width:"280"},scopedSlots:e._u([{key:"default",fn:function(t){var r=t.row;return[a("el-button",{attrs:{type:"text",size:"small"},on:{click:function(t){return e.$router.push("/employees/detail/"+r.id)}}},[e._v(" 查看 ")]),a("el-button",{attrs:{type:"text",size:"small"},on:{click:function(t){return e.openRole(r)}}},[e._v(" 分配角色 ")]),a("el-button",{attrs:{type:"text",size:"small"},on:{click:function(t){return e.delEmpl(r)}}},[e._v(" 删除 ")])]}}])})],1),a("el-row",{staticStyle:{height:"60px"},attrs:{type:"flex",justify:"center",align:"middle"}},[a("el-pagination",{attrs:{background:"",layout:"prev, pager, next,sizes",total:e.total,"page-size":e.query.size,"current-page":e.query.page,"page-sizes":[5,10,20,30,40,50,100,2]},on:{"current-change":e.changePage,"size-change":e.sizeChange}})],1)],1)])],1),a("AddEmpl",{attrs:{"show-dialog":e.showDialog},on:{"close-show":function(t){e.showDialog=t}}}),a("el-dialog",{attrs:{width:"300px",title:"二维码",visible:e.showCodeDialog},on:{close:function(t){e.showCodeDialog=!1}}},[a("el-row",{attrs:{type:"flex",justify:"center",align:"center"}},[a("canvas",{ref:"myCanvas"})])],1),a("AssignRole",{ref:"assginR",attrs:{"show-assign-role-dialog":e.showAssignRoleDialog},on:{"update:showAssignRoleDialog":function(t){e.showAssignRoleDialog=t},"update:show-assign-role-dialog":function(t){e.showAssignRoleDialog=t}}})],1)},n=[],o=a("1da1"),i=(a("d3b7"),a("3ca3"),a("ddb0"),a("b64b"),a("07ac"),a("159b"),a("caad"),a("2532"),a("96cf"),a("8f00")),l={hireType:[{id:1,value:"正式"},{id:2,value:"非正式"}],subjection:[{id:"1",value:"总部"},{id:"2",value:"分城市"}],workingState:[{id:"1",value:"在职"},{id:"2",value:"离职"}],leaveType:[{id:"1",value:"主动离职"},{id:"2",value:"被动离职"},{id:"3",value:"退休"}],attritionMonth:[{id:"1",value:"离职日本月"},{id:"2",value:"离职日次月"}],informaltype:[{id:"2",value:"实习"},{id:"3",value:"劳务"},{id:"4",value:"顾问"},{id:"5",value:"返聘"},{id:"6",value:"外包"}],highestDegree:[{id:"1",value:"初中"},{id:"2",value:"高中"},{id:"3",value:"中专"},{id:"4",value:"大专"},{id:"5",value:"本科"},{id:"6",value:"硕士"},{id:"7",value:"博士"},{id:"8",value:"其他"}],isOverseas:[{id:"1",value:"中国大陆"},{id:"2",value:"港澳台国外"}],gender:[{id:"1",value:"男"},{id:"2",value:"女"}],maritaStatus:[{id:"1",value:"未婚"},{id:"2",value:"已婚"},{id:"3",value:"离异"}],animalSymbol:[{id:"1",value:"鼠"},{id:"2",value:"牛"},{id:"3",value:"虎"},{id:"4",value:"兔"},{id:"5",value:"龙"},{id:"6",value:"蛇"},{id:"7",value:"马"},{id:"8",value:"羊"},{id:"9",value:"猴"},{id:"10",value:"鸡"},{id:"11",value:"狗"},{id:"12",value:"猪"}],constellation:[{code:1,value:"水瓶座"},{code:2,value:"双鱼座"},{code:3,value:"白羊座"},{code:4,value:"金牛座"},{code:5,value:"双子座"},{code:6,value:"巨蟹座"},{code:7,value:"狮子座"},{code:8,value:"处女座"},{code:9,value:"天秤座"},{code:10,value:"天蝎座"},{code:11,value:"射手座"},{code:12,value:"摩羯座"}],bloodType:[{id:"1",value:"A型"},{id:"2",value:"B型"},{id:"3",value:"O型"},{id:"4",value:"AB型"}],educationType:[{id:"1",value:"统招"},{id:"2",value:"自考"},{id:"3",value:"成考"}],positiveType:[{id:"1",value:"已转正"},{id:"2",value:"未转正"}],contractPeriod:[{id:"1",value:"6月"},{id:"2",value:"12月"},{id:"3",value:"24月"},{id:"4",value:"36月"},{id:"5",value:"其他"}],renewalCount:[{id:1,value:"0次"},{id:2,value:"1次"},{id:3,value:"2次"},{id:4,value:"3次"},{id:5,value:"4次或以上"}],resumeSource:[{id:"1",value:"智联招聘"},{id:"2",value:"拉勾网"},{id:"3",value:"前程无忧"},{id:"4",value:"猎聘网"},{id:"5",value:"校园宣讲"},{id:"6",value:"猎头"},{id:"7",value:"内部推荐"}],hireSourceType:[{id:"1",value:"社招"},{id:"2",value:"校招"}],departments:[{id:"1",value:"总裁办"},{id:"2",value:"研究院"}],stausInfos:[{id:"1",value:"在职"},{id:"2",value:"入职"},{id:"3",value:"离职"}]},s=a("5a0c"),u=a.n(s),c=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-dialog",{attrs:{title:"新增员工",visible:e.showDialog},on:{close:e.close},scopedSlots:e._u([{key:"footer",fn:function(){return[a("el-button",{on:{click:function(t){return e.$emit("close-show",!1)}}},[e._v("取消")]),a("el-button",{attrs:{type:"primary"},on:{click:e.addEmpl}},[e._v(" 确定 ")])]},proxy:!0}])},[a("el-form",{ref:"addForm",attrs:{"label-width":"120px",model:e.formData,rules:e.rules}},[a("el-form-item",{attrs:{label:"姓名",prop:"username"}},[a("el-input",{staticStyle:{width:"50%"},attrs:{placeholder:"请输入姓名"},model:{value:e.formData.username,callback:function(t){e.$set(e.formData,"username",t)},expression:"formData.username"}})],1),a("el-form-item",{attrs:{label:"手机",prop:"mobile"}},[a("el-input",{staticStyle:{width:"50%"},attrs:{placeholder:"请输入手机号"},model:{value:e.formData.mobile,callback:function(t){e.$set(e.formData,"mobile",t)},expression:"formData.mobile"}})],1),a("el-form-item",{attrs:{label:"入职时间",prop:"timeOfEntry"}},[a("el-date-picker",{staticStyle:{width:"50%"},attrs:{placeholder:"请选择入职时间"},model:{value:e.formData.timeOfEntry,callback:function(t){e.$set(e.formData,"timeOfEntry",t)},expression:"formData.timeOfEntry"}})],1),a("el-form-item",{attrs:{label:"聘用形式",prop:"formOfEmployment"}},[a("el-select",{staticStyle:{width:"50%"},attrs:{placeholder:"请选择"},model:{value:e.formData.formOfEmployment,callback:function(t){e.$set(e.formData,"formOfEmployment",t)},expression:"formData.formOfEmployment"}},e._l(e.hireType,(function(e){return a("el-option",{key:e.id,attrs:{label:e.value,value:e.id}})})),1)],1),a("el-form-item",{attrs:{label:"工号",prop:"workNumber"}},[a("el-input",{staticStyle:{width:"50%"},attrs:{placeholder:"请输入工号"},model:{value:e.formData.workNumber,callback:function(t){e.$set(e.formData,"workNumber",t)},expression:"formData.workNumber"}})],1),a("el-form-item",{attrs:{label:"部门",prop:"departmentName"}},[a("el-input",{staticStyle:{width:"50%"},attrs:{placeholder:"请选择部门"},on:{focus:function(t){e.showDep=!0}},model:{value:e.formData.departmentName,callback:function(t){e.$set(e.formData,"departmentName",t)},expression:"formData.departmentName"}}),a("el-row",{directives:[{name:"show",rawName:"v-show",value:e.showDep,expression:"showDep"}],staticClass:"selBox"},[a("i",{staticClass:"el-icon-circle-close",on:{click:function(t){e.showDep=!1}}}),a("el-tree",{attrs:{data:e.departData,props:{label:"name"}},on:{"node-click":e.selDep}})],1)],1),a("el-form-item",{attrs:{label:"转正时间"}},[a("el-date-picker",{staticStyle:{width:"50%"},attrs:{placeholder:"请选择转正时间"},model:{value:e.formData.timeOfEntry,callback:function(t){e.$set(e.formData,"timeOfEntry",t)},expression:"formData.timeOfEntry"}})],1)],1)],1)},d=[],m=(a("b0c0"),a("0e8f")),f=a("ed08"),p={props:{showDialog:{type:Boolean,default:!1}},data:function(){return{showDep:!1,departData:[],hireType:l.hireType,formData:{username:"",mobile:"",timeOfEntry:"",formOfEmployment:"",workNumber:"",departmentName:"",correctionTime:""},rules:{username:[{required:!0,message:"用户姓名不能为空",trigger:["blur"]},{min:1,max:4,message:"用户姓名为1-4位",trigger:["blur","change"]}],mobile:[{required:!0,message:"手机号不能为空",trigger:["blur","change"]},{pattern:/^1[3-9]\d{9}$/,message:"手机号格式不正确",trigger:["blur","change"]}],formOfEmployment:[{required:!0,message:"聘用形式不能为空",trigger:["blur","change"]}],workNumber:[{required:!0,message:"工号不能为空",trigger:["blur","change"]}],departmentName:[{required:!0,message:"部门不能为空",trigger:["blur","change"]}],timeOfEntry:[{required:!0,message:"请选择入职时间",trigger:["blur","change"]}]}}},created:function(){this.getDepartData()},methods:{addEmpl:function(){var e=this;return Object(o["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,e.$refs.addForm.validate(),e.formData.correctionTime=Object(f["b"])(e.formData.correctionTime,"{y}-{m}-{d}"),e.formData.timeOfEntry=Object(f["b"])(e.formData.timeOfEntry,"{y}-{m}-{d}"),t.next=6,Object(i["a"])(e.formData);case 6:e.$message.success("添加成功"),e.close(),e.$parent.getList(),t.next=14;break;case 11:t.prev=11,t.t0=t["catch"](0),console.dir(t.t0);case 14:case"end":return t.stop()}}),t,null,[[0,11]])})))()},close:function(){this.$emit("close-show",!1),this.$refs.addForm.resetFields()},getDepartData:function(){var e=this;return Object(o["a"])(regeneratorRuntime.mark((function t(){var a,r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,Object(m["d"])();case 2:a=t.sent,r=a.depts,e.departData=Object(f["c"])(r);case 5:case"end":return t.stop()}}),t)})))()},selDep:function(e){console.log("当前选中的部门对象",e),this.formData.departmentName=e.name,this.showDep=!1}}},v=p,h=(a("4221"),a("2877")),g=Object(h["a"])(v,c,d,!1,null,"3a2c0bef",null),b=g.exports,y=a("d055"),w=a.n(y),D=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-dialog",{staticClass:"assign-role",attrs:{title:"分配角色",visible:e.showAssignRoleDialog},on:{close:e.close},scopedSlots:e._u([{key:"footer",fn:function(){return[a("el-button",{attrs:{type:"primary",size:"small"},on:{click:e.saveRole}},[e._v("确定")]),a("el-button",{attrs:{size:"small"},on:{click:function(t){return e.$emit("update:show-assign-role-dialog",!1)}}},[e._v(" 取消 ")])]},proxy:!0}])},[a("el-checkbox-group",{model:{value:e.rolesList,callback:function(t){e.rolesList=t},expression:"rolesList"}},e._l(e.list,(function(t){return a("el-checkbox",{key:t.id,attrs:{label:t.id}},[e._v(" "+e._s(t.name)+" ")])})),1)],1)},O=[],k=a("90e7"),x=a("c24f"),j={props:{showAssignRoleDialog:{type:Boolean,default:!1}},data:function(){return{list:[],rolesList:[]}},mounted:function(){this.getRoleList()},methods:{close:function(){this.$emit("update:show-assign-role-dialog",!1),this.rolesList=[]},getRoleList:function(){var e=this;return Object(o["a"])(regeneratorRuntime.mark((function t(){var a,r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,Object(k["e"])({page:1,pagesize:1e3});case 2:a=t.sent,r=a.rows,e.list=r;case 5:case"end":return t.stop()}}),t)})))()},getRoleDetail:function(e){var t=this;return Object(o["a"])(regeneratorRuntime.mark((function a(){var r;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return a.next=2,Object(x["a"])(e);case 2:r=a.sent,console.log("当前点击的用户人的资料",r),t.userId=e,t.rolesList=r.roleIds;case 6:case"end":return a.stop()}}),a)})))()},saveRole:function(){var e=this;return Object(o["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,Object(i["b"])({id:e.userId,roleIds:e.rolesList});case 2:e.$message.success("分配角色成功"),e.$emit("update:showAssignRoleDialog",!1);case 4:case"end":return t.stop()}}),t)})))()}}},R=j,E=(a("60e9"),Object(h["a"])(R,D,O,!1,null,"0401f1e3",null)),_=E.exports;console.log("枚举的数据",l);var $={components:{AddEmpl:b,AssignRole:_},data:function(){return{EnumTypes:l,list:[],query:{page:1,size:5},total:0,qy:!0,showDialog:!1,downloadLoading:!1,showCodeDialog:!1,showAssignRoleDialog:!1}},created:function(){this.getList()},methods:{openRole:function(e){var t=this;return Object(o["a"])(regeneratorRuntime.mark((function a(){return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:t.$refs.assginR.getRoleDetail(e.id),t.showAssignRoleDialog=!0,console.log("当前点击的节点对象信息",e);case 3:case"end":return a.stop()}}),a)})))()},qurCode:function(e){var t=this;e&&(this.showCodeDialog=!0,this.$nextTick((function(){w.a.toCanvas(t.$refs.myCanvas,e)})))},exportData:function(){var e=this;return Object(o["a"])(regeneratorRuntime.mark((function t(){var r,n,o,i,l;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.downloadLoading=!0,t.next=3,Promise.all([a.e("chunk-79416f12"),a.e("chunk-2d0cc0b6")]).then(a.bind(null,"4bf8"));case 3:r=t.sent,n={"手机号":"mobile","姓名":"username","入职日期":"timeOfEntry","聘用形式":"formOfEmployment","工号":"workNumber","转正日期":"correctionTime","部门":"departmentName"},o=Object.keys(n),i=Object.values(n),l=e.transformTdata(e.list,i),r.export_json_to_excel({header:o,data:l,filename:"elm-list-".concat(Date.now()),autoWidth:!0,bookType:"xlsx"}),e.downloadLoading=!1;case 10:case"end":return t.stop()}}),t)})))()},transformTdata:function(e,t){var a=this,r=[];return e.forEach((function(e){var n=[];for(var o in e)t.includes(o)&&("formOfEmployment"===o?n.push(a.formatForm(e[o])):n.push(e[o]));r.push(n)})),r},getList:function(){var e=this;return Object(o["a"])(regeneratorRuntime.mark((function t(){var a,r,n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,Object(i["d"])(e.query);case 2:a=t.sent,r=a.rows,n=a.total,e.list=r,e.total=n;case 7:case"end":return t.stop()}}),t)})))()},changePage:function(e){this.query.page=e,this.getList()},sizeChange:function(e){this.query.size=e,this.getList()},formatForm:function(e){var t={};return this.EnumTypes.hireType.forEach((function(e){t[e.id]=e.value})),t[e]},formatDate:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"YYYY-MM-DD";return u()(e).format(t)},delEmpl:function(e){var t=this;return Object(o["a"])(regeneratorRuntime.mark((function a(){var r;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return a.prev=0,a.next=3,t.$confirm("确认要删除".concat(e.username,"吗?"));case 3:return a.next=5,Object(i["c"])(e.id);case 5:r=Math.ceil(t.total-1/t.query.size),r>0&&(t.query.page=t.query.page>r?r:t.query.page),t.getList(),t.$message.success("删除成功！"),a.next=14;break;case 11:a.prev=11,a.t0=a["catch"](0),console.log(a.t0);case 14:case"end":return a.stop()}}),a,null,[[0,11]])})))()}}},S=$,q=(a("f4e2"),Object(h["a"])(S,r,n,!1,null,"328a0144",null));t["default"]=q.exports},"0e8f":function(e,t,a){"use strict";a.d(t,"d",(function(){return n})),a.d(t,"b",(function(){return o})),a.d(t,"a",(function(){return i})),a.d(t,"c",(function(){return l})),a.d(t,"e",(function(){return s}));var r=a("b775");function n(){return Object(r["a"])({url:"/company/department"})}function o(e){return Object(r["a"])({url:"/company/department/".concat(e),method:"delete"})}function i(e){return Object(r["a"])({url:"/company/department",method:"post",data:e})}function l(e){return Object(r["a"])({url:"/company/department/".concat(e)})}function s(e){return Object(r["a"])({url:"/company/department/".concat(e.id),method:"put",data:e})}},"181a":function(e,t,a){},4221:function(e,t,a){"use strict";a("181a")},4741:function(e,t,a){},"60e9":function(e,t,a){"use strict";a("d147")},"8f00":function(e,t,a){"use strict";a.d(t,"e",(function(){return n})),a.d(t,"d",(function(){return o})),a.d(t,"c",(function(){return i})),a.d(t,"a",(function(){return l})),a.d(t,"f",(function(){return s})),a.d(t,"g",(function(){return u})),a.d(t,"b",(function(){return c}));var r=a("b775");function n(){return Object(r["a"])({url:"/sys/user/simple"})}function o(e){return Object(r["a"])({method:"get",url:"/sys/user",params:e})}function i(e){return Object(r["a"])({method:"delete",url:"/sys/user/".concat(e)})}function l(e){return Object(r["a"])({method:"post",url:"/sys/user",data:e})}function s(e){return Object(r["a"])({url:"/sys/user/batch",method:"post",data:e})}function u(e){return Object(r["a"])({url:"/sys/user/".concat(e.id),method:"put",data:e})}function c(e){return Object(r["a"])({url:"/sys/user/assignRoles",data:e,method:"put"})}},"90e7":function(e,t,a){"use strict";a.d(t,"e",(function(){return n})),a.d(t,"c",(function(){return o})),a.d(t,"a",(function(){return i})),a.d(t,"d",(function(){return l})),a.d(t,"f",(function(){return s})),a.d(t,"b",(function(){return u}));var r=a("b775");function n(e){return Object(r["a"])({url:"/sys/role",params:e})}function o(e){return Object(r["a"])({url:"/sys/role/".concat(e),method:"delete"})}function i(e){return Object(r["a"])({url:"/sys/role",data:e,method:"post"})}function l(e){return Object(r["a"])({url:"/sys/role/".concat(e)})}function s(e){return Object(r["a"])({url:"/sys/role/".concat(e.id),data:e,method:"put"})}function u(e){return Object(r["a"])({url:"/sys/role/assignPrem",method:"put",data:e})}},d147:function(e,t,a){},ed08:function(e,t,a){"use strict";a.d(t,"b",(function(){return n})),a.d(t,"c",(function(){return o})),a.d(t,"a",(function(){return i}));var r=a("53ca");a("ac1f"),a("00b4"),a("d3b7"),a("25f0"),a("5319"),a("4d90"),a("1276"),a("159b");function n(e,t){if(0===arguments.length||!e)return null;var a,n=t||"{y}-{m}-{d} {h}:{i}:{s}";"object"===Object(r["a"])(e)?a=e:("string"===typeof e&&/^[0-9]+$/.test(e)&&(e=parseInt(e)),"number"===typeof e&&10===e.toString().length&&(e*=1e3),a=new Date(e));var o={y:a.getFullYear(),m:a.getMonth()+1,d:a.getDate(),h:a.getHours(),i:a.getMinutes(),s:a.getSeconds(),a:a.getDay()},i=n.replace(/{([ymdhisa])+}/g,(function(e,t){var a=o[t];return"a"===t?["日","一","二","三","四","五","六"][a]:a.toString().padStart(2,"0")}));return i}function o(e){var t=[],a={};return e.forEach((function(e){a[e.id]=e})),e.forEach((function(e){if("-1"!==e.id){var r=a[e.pid];r?(r.children||(r.children=[]),r.children.push(e)):t.push(e)}})),t}function i(e,t){var a=new Date(24*(e-1)*36e5+1);a.setYear(a.getFullYear()-70);var r=a.getFullYear()+"",n=a.getMonth()+1+"",o=a.getDate()+"";return t&&1===t.length?r+t+n+t+o:r+(n<10?"0"+n:n)+(o<10?"0"+o:o)}},f4e2:function(e,t,a){"use strict";a("4741")}}]);